# This file was *autogenerated* from the file Experiment.sage.
from sage.all_cmdline import *   # import sage library
_sage_const_1 = Integer(1); _sage_const_0 = Integer(0); _sage_const_2000 = Integer(2000); _sage_const_8 = Integer(8); _sage_const_10 = Integer(10); _sage_const_0p5 = RealNumber('0.5'); _sage_const_20 = Integer(20); _sage_const_0p01 = RealNumber('0.01')
import MM1Sim
import InfMM1
reload(MM1Sim)
reload(InfMM1)
import matplotlib.pyplot as mtlp

if __name__ == "__main__":
    MDP_Plot_Data = []
    Sim_Plot_data = []
    p = plot([],axes_labels = ['$\lambda$','Total Cost'])
    colors = rainbow(_sage_const_10 )
    for i in range(_sage_const_1 ,_sage_const_8 ):
        disc = i/_sage_const_10 

        MDP_Plot_Data = []
        Sim_Plot_data = []
        for e in range(_sage_const_1 ,_sage_const_20 ):
            print "Testing %s" %(e)
            MDP = InfMM1.Queue(e,_sage_const_10 ,_sage_const_0p5 ,Thresh =_sage_const_20  ,alpha = disc,epsilon = _sage_const_0p01 )
            MDPVal = MDP.SolveNHor(T=_sage_const_0 ,N=_sage_const_0 )
            MDP_Plot_Data.append([e,MDPVal])

            Trials = [MM1Sim.Simul8(e,_sage_const_10 ,_sage_const_0p5 ,Policy=_sage_const_20 ,alpha = disc,Simulation_Time = _sage_const_20  ,warm_up = _sage_const_0 ) for k in range(_sage_const_2000 )]
            TrialsAve =  sum(Trials)/len(Trials)
            Sim_Plot_data.append([e,TrialsAve])
            if e == _sage_const_1 :
                p += line(MDP_Plot_Data,color = colors[i])
                p += line((Sim_Plot_data),color =  colors[i],linestyle = '--',legend_label= '$ \\alpha = %s $' %disc)
            else:
                p += line(MDP_Plot_Data,color = colors[i])
                p += line((Sim_Plot_data),color =  colors[i])
            p.save('Graph.pdf')

    mtlp.figure()
    mtlp.hist(Trials,_sage_const_20 )
    mtlp.savefig('hist.png')


